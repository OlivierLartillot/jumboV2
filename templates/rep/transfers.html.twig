{{ include('partials/header-reproupement.html.twig') }}

    <div class="row justify-content-center">
        <div class="col-xl-4 col-sm-6">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex flex-row bd-highlight mb-2 justify-content-center">   
                        <form action={{ path('app_admin_rep_transfers') }} method="GET">
                            <div class="text-center">
                                <input class="form-control mt-3 mb-3" name="date" type="date" value="{{date | date('Y-m-d') }}">
                            </div>
                            <div class="text-center">
                                <input type="submit" class="btn btn-primary waves-effect waves-light btn-sm">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    {% set i = 1 %}

    <!-- interHotels -->
    <div class="col-md-4">
        <div class="card mt-4 maintenance-box border border-primary">
            <div class="card-body p-4 ">
                {% if transfersInterHotelThisday|length > 0 %}
                    <h5 class="font-size-15 text-uppercase"><i class="mdi mdi-car"></i> You have {{ transfersInterHotelThisday|length }} Transfer(s) inter hotel</h5>
            <div>
            </div>
                {% else %}
                    <i class="mdi mdi-car"></i> {% trans %}Inter Hotel{% endtrans %}: {% trans %}You don't have any Transfer{% endtrans %} 
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row">
        {% for interHotel in transfersInterHotelThisday|sort((a, b) => a.pickup|date('H:i') <=> b.pickup|date('H:i')) %}
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5><a href="{{ path('app_customer_card_show', {id:interHotel.customerCard.id})}}"><span id="textToCopy-{{i}}">{{ interHotel.customerCard.holder|title }}</span></a> - <span class="fs-6">{{ interHotel.customerCard.reservationNumber }} </span></h5>
                    
                    <div class="row mt-3">
                        <div class="col-9">

                            <ul class="list-unstyled">
                                <li class="event-list">
                                    <h6>From</h6>
                                    <p class="text-muted">{{ interHotel.fromStart }}</p>       
                                </li>
                                <li class="event-list">
                                    <h6>To</h6>
                                    <p class="text-muted">{{ interHotel.toArrival }}</p>       
                                </li>
                                <li class="event-list">
                                    <h6>PickUp</h6>
                                    <p class="text-muted">{{ interHotel.pickup|date('H:i')}}</p>       
                                </li>
                            </ul>

                        </div>
                        <div class="col-3">
                            <div class="col-xl-6 text-center">
                                <p>     
                                    <a href="{{ path('app_whats_app_client', {'natureTransfer': 'interhotel','transferId': interHotel.id}) }}" class="linkButton">
                                        <img src="{{ asset("images/brands/whatsApp.png")}}" class="w-100"/>
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% set i = i + 1 %}
        {% endfor %}
    </div>
    <!-- Depart -->
    <div class="col-md-4">
        <div class="card mt-4 maintenance-box border border-primary">
            <div class="card-body p-4 ">
                {% if transfersDepartureThisday|length > 0 %}
                <h5 class="font-size-15 text-uppercase"><i class="mdi mdi-airplane-takeoff "></i> You have {{ transfersDepartureThisday|length }} Transfer(s) Departure</h5>
            <div>
            </div>
                {% else %}
                    <i class="mdi mdi-airplane-takeoff "></i> {% trans %}Departure{% endtrans %}: {% trans %}You don't have any Transfer{% endtrans %} 
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row mb-5">
        {% for departure in transfersDepartureThisday|sort((a, b) => a.pickup|date('H:i') <=> b.pickup|date('H:i')) %}
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5><a href="{{ path('app_customer_card_show', {id:departure.customerCard.id})}}"><span id="textToCopy-{{i}}">{{ departure.customerCard.holder|title }}</span></a> - <span class="fs-6">{{ departure.customerCard.reservationNumber|upper }}</span></h5>
                    <div class="row mt-3">
                        <div class="col-9">
                            <ul class="list-unstyled">
                                <li class="event-list">
                                    <h6>From</h6>
                                    <p class="text-muted">{{ departure.fromStart }}</p>       
                                </li>
                                <li class="event-list">
                                    <h6>To</h6>
                                    <p class="text-muted">{{ departure.toArrival }}</p>       
                                </li>
                                <li class="event-list">
                                    <h6>PickUp</h6>
                                    <p class="text-muted">{{ departure.pickup|date('H:i')}}</p>       
                                </li>
                            </ul>
                        </div>
                        <div class="col-3">
                            <div class="col-xl-6 text-center">
                                <p>     
                                    <a href="{{ path('app_whats_app_client', {'natureTransfer': 'departure','transferId': departure.id}) }}" class="linkButton "><img src="{{ asset("images/brands/whatsApp.png")}}" class="w-100"/></a>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Button Modal -->
                    <button type="button" class="badge btn-sm btn-primary waves-effect waves-light" data-bs-toggle="modal" data-bs-target="#myModal-{{i}}">Show More</button>
                
                    <!-- sample modal content -->
                    <div id="myModal-{{i}}" class="modal fade" tabindex="-1" aria-labelledby="myModalLabel" style="display: none;" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="myModalLabel"><a href="{{ path('app_customer_card_show', {id:departure.customerCard.id})}}"><span id="textToCopy-{{i}}">{{ departure.customerCard.holder|title }}</span></a> - <span class="fs-6">{{ departure.customerCard.reservationNumber|upper }}</span></h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <h4 class="">Departure</h4>

                                    <div class="mt-3">
                                        <ul class="list-unstyled">
                                            <li class="event-list">
                                                <h5>From</h5>
                                                <p class="text-muted">{{ departure.fromStart }}</p>       
                                            </li>
                                            <li class="event-list">
                                                <h5>To</h5>
                                                <p class="text-muted">{{ departure.toArrival }}</p>       
                                            </li>
                                            <li class="event-list">
                                                <h5>PickUp</h5>
                                                <p class="text-muted">{{ departure.pickup|date('H:i')}}</p>       
                                            </li>
                                            <li class="event-list">
                                                <h5>Numéro du bon</h5>
                                                <p>{{ departure.voucherNumber }}</p>       
                                            </li>
                                            <hr>
                                            <li class="event-list">
                                                <h5>Numéro de vol</h5>
                                                <p>{{ departure.flightNumber|upper }}</p>       
                                            </li>
                                            <li class="event-list">
                                                <h5>Heure du vol</h5>
                                                <p>{{ departure.hour|date('H:i') }}</p>       
                                            </li>
                                        </ul>
                                        </div>
                                        
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-light waves-effect" data-bs-dismiss="modal">Close</button>
                                </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->

                </div>
            </div>
        </div>
        {% set i = i + 1 %}
        {% endfor %}          
    </div>

                    </div> <!-- container-fluid -->
                </div>
                <!-- End Page-content -->

                {{ include('partials/footer.html.twig') }}
            </div>
            <!-- end main content-->

            <!-- Le menu créé pour les rep en bas de page -->
            {% if "ROLE_REP" in app.user.roles %}
                {{ include('partials/rep-bottom-menu.html.twig') }}            
            {% endif %}
        </div>
        <!-- END layout-wrapper -->
        {{ include('partials/right-sidebar.html.twig') }}

        {{ include('partials/vendor-scripts.html.twig') }}

        <!-- apexcharts -->
        <!-- <script src="{{ asset('/libs/apexcharts/apexcharts.min.js')}}"></script> -->

        <!-- <script src="/js/pages/dashboard.init.js"></script> -->

        <!-- App js -->
        <script src="/js/app.js"></script>

    </body>