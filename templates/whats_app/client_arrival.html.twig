{{ include('partials/header-reproupement.html.twig') }}

    <h1>WhatsApp du client</h1>

{# ! D√©clin√© en plusieurs langues ici pour plus de simplicit√© plutot que d'utiliser la traduction ! #}
{# ! Pas d'intentation pour des messages format√©s sur whatsapp #}


{% set 
    languageTab = {
        'nom' : {
            'fr': "Nom", 
            '' : "Name", 
            'en' : "Name", 
            'es' : "Apellido",  
            'it' : "Cognome",
            'po' : "Sobrenome", 
        },
        'from': {
            'fr': "De", 
            '' : "From", 
            'en' : "From", 
            'es' : "De",  
            'it' : "Da",
            'po' : "De", 
        },
        'to': {
            'fr': "A", 
            '' : "To", 
            'en' : "To", 
            'es' : "Al",  
            'it' : "Al",
            'po' : "Para o", 
        },
        'at': {
            'fr': "√†", 
            '' : "at", 
            'en' : "at", 
            'es' : "a las",  
            'it' : "alle",
            'po' : "√†s", 
        },
    }
    
%}


{% set trans_day = { 
  'fr': ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
  'es': ["Domingo", "Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado"],
  'en': ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  'it': ["Domenica", "Luned√¨", "Marted√¨", "Mercoled√¨", "Gioved√¨", "Venerd√¨", "Sabato"],
  'po': ["Domingo", "Segunda-feira", "Ter√ßa-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "S√°bado"] 
    } 
%}

{# {{ dump(transferObject) }} #}

{{ transferObject.customerCard.agency.language}}

{# eg: fr #}
{% set language = transferObject.customerCard.agency.language  %} 

{% if language == 'en' %}
    {% set date = transferObject.date|date('Y-m-d') %}
{% else %}
    {% set date = transferObject.date|date('d-m-Y') %}
{% endif %}

{# Entreprise Name #}
{% if app.request.server.get('ENTREPRISE') == 'jumbo' %}
    {% set entreprise = 'Jumbo Tours' %}
{% elseif app.request.server.get('ENTREPRISE') == 'meetingPoint' %}
    {% set entreprise = 'Meeting Point' %}
{% else %}
    {% set entreprise = "Entreprise" %}
{% endif %}


{% if text %}

<div id="message">
{{ text|raw }}
</div>

{% else %}

    {% if natureTransfer == "arrival" %}

        {% if language == 'fr' %}
<div id="message">
Bonjour {{transferObject.customerCard.holder|title}}! Bienvenue √† Punta Cana! üå¥

*Je suis {{ transferObject.staff }} votre repr√©sentant {{ entreprise }}.*

Vous pouvez me joindre √† ce num√©ro en cas de besoin. 

*N‚Äôoubliez pas notre rendez-vous de demain {% if textTimeOfDay %}{{textTimeOfDay}}{% endif %} ({{ trans_day[language][transferObject.date|date('w')] }}) √† {{ transferObject.meetingAt|date('H:i') }} {% if meetingAtPoint %}{{meetingAtPoint}}{% else %}√† la {{ transferObject.meetingPoint }}{% endif %} de l'h√¥tel* durant lequel je vous donnerai toutes les informations concernant votre s√©jour ( infos sur l‚Äôh√¥tel, sur le pays, horaire de retour, test PCR si besoin etc) 

Nous en profiterons aussi pour planifier vos *excursions* et *confirmer votre retour*. Je vous demanderai donc s‚Äôil vous pla√Æt de venir *munis de vos documents de voyage*.

*A demain !*
</div>
        {% elseif language == 'es' %}
<div id="message">
¬°Hola {{transferObject.customerCard.holder|title}}! ¬°Bienvenido a Punta Cana! üå¥

*Soy {{ transferObject.staff }}, tu representante de {{ entreprise }}.*

Puedes contactarme en este n√∫mero en caso de necesitar ayuda.

*No olvides nuestra cita de ma√±ana {% if textTimeOfDay %}{{textTimeOfDay}}{% endif %} ({{ trans_day[language][transferObject.date|date('w')] }}) a las {{ transferObject.meetingAt|date('H:i') }} {% if meetingAtPoint %}{{meetingAtPoint}}{% else %}en {{ transferObject.meetingPoint }}{% endif %} del hotel*, durante la cual te proporcionar√© toda la informaci√≥n sobre tu estancia (informaci√≥n sobre el hotel, sobre el pa√≠s, horario de regreso, prueba PCR si es necesario, etc.).

Tambi√©n aprovecharemos para planificar tus *excursiones* y *confirmar tu regreso*. Te pedir√© que vengas *con tus documentos de viaje*.

*¬°Hasta ma√±ana!*
</div>
        {% elseif language == 'en' %}
<div id="message">
Hello {{transferObject.customerCard.holder|title}}! Welcome to Punta Cana! üå¥

*I am {{ transferObject.staff }}, your {{ entreprise }} representative.*

You can reach me at this number in case you need assistance.

*Don't forget our appointment tomorrow {% if textTimeOfDay %}{{textTimeOfDay}}{% endif %} ({{ trans_day[language][transferObject.date|date('w')] }}) at {{ transferObject.meetingAt|date('H:i') }} {% if meetingAtPoint %}{{meetingAtPoint}}{% else %}at the {{ transferObject.meetingPoint }}{% endif %} of the hotel*, during which I will provide you with all the information about your stay (hotel information, country information, return schedule, PCR test if necessary, etc.).

We will also take the opportunity to plan your *excursions* and *confirm your return*. I will ask you to please come *with your travel documents*.

*See you tomorrow!*
</div>
        {% elseif language == 'it' %}
<div id="message">
Ciao {{transferObject.customerCard.holder|title}}! Benvenuto a Punta Cana! üå¥

*Sono {{ transferObject.staff }}, il tuo rappresentante di {{ entreprise }}.*

Puoi contattarmi a questo numero in caso di bisogno.

*Non dimenticare il nostro appuntamento domani {% if textTimeOfDay %}{{textTimeOfDay}}{% endif %} ({{ trans_day[language][transferObject.date|date('w')] }}) alle {{ transferObject.meetingAt|date('H:i') }} {% if meetingAtPoint %}{{meetingAtPoint}}{% else %}presso il {{ transferObject.meetingPoint }}{% endif %} dell'hotel*, durante il quale ti fornir√≤ tutte le informazioni sul tuo soggiorno (informazioni sull'hotel, informazioni sul paese, orario di ritorno, test PCR se necessario, ecc.).

Ne approfitteremo anche per pianificare le tue *escursioni* e *confermare il tuo ritorno*. Ti chieder√≤ quindi di venire *con i tuoi documenti di viaggio*.

*A domani!*
</div>
        {% elseif language == 'po' %}
<div id="message">
Ol√° {{transferObject.customerCard.holder|title}}! Bem-vindo a Punta Cana! üå¥

*Eu sou {{ transferObject.staff }}, seu representante da {{ entreprise }}.*

Voc√™ pode me contatar neste n√∫mero caso precise de assist√™ncia.

*N√£o se esque√ßa da nossa reuni√£o amanh√£ {% if textTimeOfDay %}{{textTimeOfDay}}{% endif %} ({{ trans_day[language][transferObject.date|date('w')] }}) √†s {{ transferObject.meetingAt|date('H:i') }} {% if meetingAtPoint %}{{meetingAtPoint}}{% else %}no {{ transferObject.meetingPoint }}{% endif %} do hotel*, durante a qual fornecerei todas as informa√ß√µes sobre a sua estadia (informa√ß√µes sobre o hotel, informa√ß√µes sobre o pa√≠s, hor√°rio de retorno, teste PCR se necess√°rio, etc.).

Aproveitaremos tamb√©m para planejar suas *excurs√µes* e *confirmar seu retorno*. Pe√ßo que venha *com seus documentos de viagem*.

*At√© amanh√£!*
</div>        
        {% endif %}{# endif language #}


    {% else %} {# le message en cas d'interHotel ou d√©part #}

<div id="message">
{{ textVariableToDisplay }}
</div>

    {% endif %}
{% endif %} {# fin true / false #}


                    </div> <!-- container-fluid -->
                </div>
                <!-- End Page-content -->

                {{ include('partials/footer.html.twig') }}
            </div>
            <!-- end main content-->

            <!-- Le menu cr√©√© pour les rep en bas de page -->
            {% if "ROLE_REP" in app.user.roles %}
                {{ include('partials/rep-bottom-menu.html.twig') }}            
            {% endif %}
        </div>
        <!-- END layout-wrapper -->
        {{ include('partials/right-sidebar.html.twig') }}

        {{ include('partials/vendor-scripts.html.twig') }}

        <!-- apexcharts -->
        <!-- <script src="{{ asset('/libs/apexcharts/apexcharts.min.js')}}"></script> -->

        <!-- <script src="/js/pages/dashboard.init.js"></script> -->

        <!-- App js -->
        <script src="/js/app.js"></script>

        <script>
            //die()
            let message = document.querySelector('#message').textContent
            /* let phone = document.querySelector('#tel').textContent */

            console.log(message)
        window.location.href = encodeURI('https://api.whatsapp.com/send?phone=&text=' + message); 
        </script>

    </body>
